<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Action Component Developer's Guide</title><link href="GridSphere.css" rel="stylesheet" type="text/css"><meta content="DocBook XSL Stylesheets V1.68.1" name="generator"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="N10005"></a>Action Component Developer's Guide</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#Introduction">Introduction</a></span></dt><dt><span class="sect1"><a href="#ActionComponentPortlet">Action Component Portlet</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PortletActions">Portlet Actions</a></span></dt><dt><span class="sect2"><a href="#Control">Control</a></span></dt><dt><span class="sect2"><a href="#PortletModeComponents">Portlet Mode Components</a></span></dt></dl></dd><dt><span class="sect1"><a href="#ActionComponent">Action Component</a></span></dt><dd><dl><dt><span class="sect2"><a href="#ActionComponentLifeCycle">Life Cycle</a></span></dt><dt><span class="sect2"><a href="#PortletRequests">Portlet Requests</a></span></dt><dt><span class="sect2"><a href="#ActionEvents">Action Events</a></span></dt><dt><span class="sect2"><a href="#RenderEvents">Render Events</a></span></dt><dt><span class="sect2"><a href="#ActionMethods">Action Methods</a></span></dt><dt><span class="sect2"><a href="#ActionLinks">Action Links</a></span></dt><dt><span class="sect2"><a href="#ActionComponentFrame">Action Component Frame</a></span></dt><dt><span class="sect2"><a href="#ActionDialog">Action Dialogs</a></span></dt><dt><span class="sect2"><a href="#ActionComponentTypes">Action Component Types</a></span></dt></dl></dd><dt><span class="sect1"><a href="#DevelopingActionComponents">Developing Action Component Portlets</a></span></dt></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Introduction"></a>Introduction</h2></div></div></div><p>
        Grid Portlets extends GridSphere's <code class="classname">ActionPortlet</code> with the
        <code class="classname">ActionComponentPortlet</code>. <code class="classname">ActionComponentPortlet</code>
        provides a more advanced model for developing and reusing user interfaces, called
        <span class="emphasis"><em>action components</em></span>, represented by the <code class="classname">ActionComponent</code>
        class. This guide describes the action component model and how to develop new action components.
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ActionComponentPortlet"></a>Action Component Portlet</h2></div></div></div><p>
        <code class="classname">ActionComponentPortlet</code> is a portlet that contains "action components",
        represented by the <code class="classname">ActionComponent</code> class. Action components are reusable
        JSP user interface components that are contained within an <span class="emphasis"><em>action component frame</em></span>,
        represented by the <code class="classname">ActionComponentFrame</code> class, where the top level action component
        frame is contained within <code class="classname">ActionComponentPortlet</code>. The top level action component
        frame displays the JSP of the active action component within that frame. Only one action component can be
        active within an action component frame. However, an action component can contain action component frames for
        displaying action components within its JSP. In this way, very sophisticated user interfaces can be built.
        In Grid Portlets, for example, <code class="classname">FileBrowserComp</code> contains two action component frames for
        displaying two instances of <code class="classname">FileListComp</code> side by side:
        <pre class="screen">

    &lt;ui:table&gt;
        &lt;ui:tablerow&gt;
            &lt;!-- File browser 1 --&gt;
            &lt;ui:tablecell width="400" align="left" valign="top"&gt;
              &lt;ui:text&gt;&lt;b&gt;File Browser 1&lt;/b&gt;&lt;/ui:text&gt;
                &lt;ui:group&gt;
                &lt;ui:actioncomponent beanId="fb1"/&gt;
                &lt;/ui:group&gt;
            &lt;/ui:tablecell&gt;
            &lt;!-- Transfer buttons --&gt;
            &lt;ui:tablecell align="center" valign="middle" width="50"&gt;
                &lt;ui:table&gt;
                    &lt;ui:tablerow&gt;
                        &lt;ui:tablecell align="center" valign="middle"&gt;
                            &lt;ui:actionsubmit action="doCopyFilesFb1Fb2" value="Copy &gt;&gt;"/&gt;
                            &lt;br&gt;
                            &lt;ui:actionsubmit action="doMoveFilesFb1Fb2" value="Move &gt;&gt;"/&gt;
                            &lt;br&gt;
                        &lt;/ui:tablecell&gt;
                    &lt;/ui:tablerow&gt;
                    &lt;ui:tablerow&gt;
                        &lt;ui:tablecell align="center" valign="middle"&gt;
                            &lt;br&gt;
                            &lt;ui:actionsubmit action="doCopyFilesFb2Fb1" value="&lt;&lt; Copy"/&gt;
                            &lt;br&gt;
                            &lt;ui:actionsubmit action="doMoveFilesFb2Fb1" value="&lt;&lt; Move"/&gt;
                        &lt;/ui:tablecell&gt;
                    &lt;/ui:tablerow&gt;
                &lt;/ui:table&gt;
            &lt;/ui:tablecell&gt;
            &lt;!-- File browser 2 --&gt;
            &lt;ui:tablecell align="left" valign="top"&gt;
                &lt;ui:text&gt;&lt;b&gt;File Browser 2&lt;/b&gt;&lt;/ui:text&gt;
                &lt;ui:group&gt;
                &lt;ui:actioncomponent beanId="fb2"/&gt;
                &lt;/ui:group&gt;
            &lt;/ui:tablecell&gt;
        &lt;/ui:tablerow&gt;
    &lt;/ui:table&gt;

            </pre>
        </p><p>
            resulting in the following HTML:
            <pre class="screen">
                <div><img src="../UserGuide/media/FileBrowserPortlet.jpg"></div>
            </pre>
        </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="PortletActions"></a>Portlet Actions</h3></div></div></div><p>
            Like <code class="classname">ActionPortlet</code> in GridSphere, <code class="classname">ActionComponentPortlet</code>
            provides a natural way to deal with portlet actions. Each action component is assigned a unique
            <span class="emphasis"><em>component id</em></span>. When an action component is rendered, the bean id for all tag beans
            that are contained within the action component are prefixed with this unique component id. The result
            is that each input field in the rendered HTML is uniquely identified, associated with the action
            component they originate from by this component id prefix. This is discussed in more detail in the
            Action Component section below.
        </p><p>
            Since each action component has its own scope within JSP and the rendered HTML, there is no need to
            specify form tags within JSP (except when file input forms are required). Instead,
            <code class="classname">ActionComponentPortlet</code> renders one form tag at the top level.
            When a user clicks on an action submit button or action link, the current values of the input fields
            in the rendered HTML are applied to the corresponding tag beans of all the action components
            currently displayed. Then the resulting portlet action is mapped to a method on the action component
            class and this method is invoked. For all other action components displayed in the HTML, the
            <code class="methodname">doRender</code> method is invoked.
            By default, this means the current values of the action component will simply
            be displayed. This process is described in more detail in the Action Component Life Cycle section.
        </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="Control"></a>Control</h3></div></div></div><p>
            Like <code class="classname">ActionPortlet</code> in GridSphere, <code class="classname">ActionComponentPortlet</code>
            provides a natural way for dealing with control, through the
            <code class="methodname">setNextState</code> method of <code class="classname">ActionComponent</code>. By default,
            an action component will set the next state of its parent action component frame to its
            <span class="emphasis"><em>defalt jsp page</em></span> after its action method
            is invoked. However, this can be overridden inside the body of an action method. An action component
            can set the next state of its parent frame to an action method of another action component. That
            action component then becomes the active component within the parent frame, and so on, until the
            state the parent frame is set to a jsp page to display. Action components can also pass control up
            to the action component frame with by specifying <span class="emphasis"><em>action links</em></span>, described
            in more detail later in this guide.
        </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="PortletModeComponents"></a>Portlet Mode Components</h3></div></div></div><p>
            When an action component portlet is constructed for the first time, it registers the
            appropriate default action component to load for each <span class="emphasis"><em>portlet mode</em></span>.
            In Grid Portlets, for example, <code class="classname">FileBrowserPortlet</code>,
            sets its portlet VIEW mode default action component to <code class="classname">FileBrowserComp</code>.
            Thus, when <code class="classname">FileBrowserPortlet</code> is viewed for the first time in
            a user session, it sets the next state of its top level action component frame to
            the default action method of <code class="classname">FileBrowserComp</code>.
            <pre class="screen">
    
    public class FileBrowserPortlet extends ActionComponentPortlet {

        private transient static PortletLog log = SportletLog.getInstance(FileBrowserPortlet.class);

        public void init(PortletConfig config) throws PortletException {
            super.init(config);
            setViewModeComp(FileBrowserComp.class);
        }
    }
    
            </pre>
        </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ActionComponent"></a>Action Component</h2></div></div></div><p>
        Action components are objects that are responsbile for generating some JSP to display within
        the context of an action component portlet. Action components have a default action method, a
        render action method (set to null by default), and a default jsp page to display after any action
        method invoked. Action components can contain tag beans which are arragned for display in JSP.
        Among these tag beans, an action component can contain action component frames for displaying
        action components within its JSP.
    </p><p>
        Action components are created with <code class="interfacename">ActionComponentFactory</code>,
        a portlet service that gets deployed with each web application. Because, action components
        are JSP based, and because JSP files are only accessible within a particular servlet context,
        an <code class="interfacename">ActionComponentFactory</code> is deployed with each web application,
        where it can use the servlet context to get access to the web files and action
        component classes deployed with the web application.
    </p><p>
        Grid Portlets registers action components and to which web application they belong with
        <code class="filename">/WEB-INF/ActionComponentTypes.xml</code>, located in each web application.
        This file contains <code class="methodname">action-component-type</code> entries, which specify an
        application component class and other properties associated with that class, such as
        what its default action method is, its default jsp file, and so on. These entries get
        marshaled into an <code class="classname">ActionComponentType</code>. Each web application
        <code class="interfacename">ActionComponentFactory</code> then registers these types with the Grid
        Portlets <code class="interfacename">ActionComponentFactory</code> at startup, which acts as
        a sort of broker for instantiating all the action component classes.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ActionComponentLifeCycle"></a>Life Cycle</h3></div></div></div><p>
            An action component is created only once per action component frame per user session, with the
            <code class="methodname">ActionComponent(ActionComponentFrame frame, String compId)</code> method.
            The constructor method is where creation of tag beans usually occurs, illustrated in examples
            later in this guide. Also, in the constructor the default action method, render action method, and
            jsp page can be set, though it is generally best to specify these attributes in the
            action component type entries in  <code class="filename">/WEB-INF/ActionComponentTypes.xml</code>.
        </p></div>
`   <div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="PortletRequests"></a>Portlet Requests</h3></div></div></div><p>
            An action component portlet contains a tree of action component frames
            and components. When <code class="classname">ActionComponentPortlet</code> processes a
            portlet request, it retrieves its top level action component for the current
            user session. If the portlet request does not contain an action,
            then the top level frame retrieves its active component and calls its
            <code class="methodname">doRender</code> method. <code class="methodname">doRender</code>
            will invoke the active component's default action if this is the first
            time it is being displayed. If the component has been displayed before, then
            it calls its render action method if it is not null, otherwise it will display
            the appropriate jsp page.
        </p><p>
            If the portlet request contains an action, then a check is performed to
            see if the action string is mapped to the action method of an action component
            other than the active component (see <a href="#ActionLinks" title="Action Links">Action Links</a> below). If not, it checks to
            see if the action string maps to a method on the active component or to
            the method of an action component contained at a deeper level in the tree.
        </p><p>
            The action string represents a nested level of calls like so:
            <pre class="screen">

&lt;actionPortletId&gt;%actionCompFrameId&gt;%&lt;actionCompId&gt;%[&lt;actionMethod&gt;|%&lt;actionCompFrameId&gt;%&lt;actionCompId&gt;%[...]]

            </pre>
        </p><p>
            Thus, if the action string maps to a method on the active component, it invokes that
            components <code class="methodname">doAction</code>. Otherwise, it passes the action string
            onto the <code class="methodname">doAction</code> of the action component frame referred to
            in the string. Finally, the <code class="methodname">doRender</code> method of all the
            other action component frames contained in the active component contains is called,
            which results the <code class="methodname">doRender</code> of its active component and so
            on. This logic is repeated until the action string bottoms out to a final method call.
            How actions map to methods on action components is discussed in more detail in the
            <a href="#ActionMethods" title="Action Methods">Action Methods</a> section below.
        </p></div>
`   <div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ActionEvents"></a>Action Events</h3></div></div></div><p>
            When <code class="methodname">doAction(String action, Map parameters)</code> on
            <code class="classname">ActionComponentFrame</code> is called, the following events occur:
        </p><div class="orderedlist"><ol type="1"><li><span class="emphasis"><em>The active component is retrieved.</em></span><p>
                    The active action component for the action component frame is retrieved from
                    <code class="interfacename">ActionComponentFactory</code>.
                </p></li><li><span class="emphasis"><em>The active component is "initialized".</em></span><p>
                    The <code class="methodname">onInit()</code> method is invoked each time an instance of
                    an action component is retrieved from <code class="interfacename">ActionComponentFactory</code>.
                    Override this method whenever additional initialization is needed, such as getting
                    handles to portlet services.
                </p></li><li><span class="emphasis"><em>The active component is "loaded" from the request.</em></span><p>
                    The <code class="methodname">onLoad()</code> method is invoked after an action component
                    has been loaded from a request. This will update the values of the tab beans contained
                    in the action component with the values of input fields retreived from the portlet
                    request through its request paraemters. Override this method whenever some additional
                    preprocessing is necessary before the action invokation phase. For example, if a value
                    from the request should be translated to another value or handled in some particular
                    way for every action, then that logic should be performed here.
                </p></li><li><span class="emphasis"><em>The action string is handled.</em></span><p>
                    The action string is handled in the manner described earlier.
                </p></li><li><span class="emphasis"><em>The active component is "stored" to the request.</em></span><p>
                    The <code class="methodname">onStore()</code> method is invoked after an action component
                    has been stored to a request. Override this method whenever some additional
                    postprocessing is necessary after the action method phase. For example, if some value
                    should be stored to the request so that it is available in JSP for every action method,
                    it is best to put that logic here.
                </p></li></ol></div></div>
`   <div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="RenderEvents"></a>Render Events</h3></div></div></div><p>
            When <code class="methodname">doRender</code> on <code class="classname">ActionComponentFrame</code>
            is called, the following events occur:
        </p><div class="orderedlist"><ol type="1"><li><span class="emphasis"><em>The active action component is retrieved.</em></span><p>
                    The active action component is retrieved from
                    <code class="interfacename">ActionComponentFactory</code>.
                </p></li><li><span class="emphasis"><em>The active component is "initialized".</em></span><p>
                    The <code class="methodname">onInit()</code> method is invoked each time an instance of
                    an action component is retrieved from <code class="interfacename">ActionComponentFactory</code>.
                    Override this method whenever additional initialization is needed, such as getting
                    handles to portlet services.
                </p></li><li><span class="emphasis"><em>The active component is "loaded" from the request.</em></span><p>
                    The <code class="methodname">onLoad()</code> method is invoked after an action component
                    has been loaded from a request. This will update the values of the tab beans contained
                    in the action component with the values of input fields retreived from the portlet
                    request through its request paraemters. Override this method whenever some additional
                    preprocessing is necessary before the action invokation phase. For example, if a value
                    from the request should be translated to another value or handled in some particular
                    way for every action, then that logic should be performed here.
                </p></li><li><span class="emphasis"><em>The active component is "rendered".</em></span><p>
                    <code class="methodname">doRender(String action, Map parameters)</code> on the active
                    component is called.
                </p></li><li><span class="emphasis"><em>The active component is "stored" to the request.</em></span><p>
                    The <code class="methodname">onStore()</code> method is invoked after an action component
                    has been stored to a request. Override this method whenever some additional
                    postprocessing is necessary after the action method phase. For example, if some value
                    should be stored to the request so that it is available in JSP for every action method,
                    it is best to put that logic here.
                </p></li></ol></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ActionMethods"></a>Action Methods</h3></div></div></div><p>
            In the action component model, portlet actions originating from an action
            submit button or an action link get mapped to methods on the corresponding action
            component class. These actions take the form:
            <pre class="screen">
    <code class="methodname">&lt;actionMethodName&gt;(Map parameters)</code>
            </pre>
            where the <code class="methodname">parameters</code> argument contains the action parameters
            that were specified in the action. For example, if in JSP we have an action link tag:
            <pre class="screen">
                
    &lt;ui:actionlink action="doMyAction1" value="An Action Link"&gt;
        &lt;ui:actionparam name="actionParam1" value="actionValue1"/&gt;
        &lt;ui:actionparam name="actionParam2" value="actionValue2"/&gt;
    &lt;/ui:actionlink&gt;
                
            </pre>
            then when a user clicks on the hyperlink displayed by the action link tag,
            the action will be mapped to:
            <pre class="screen">
    <code class="methodname">doMyAction1(Map parameters)</code>
            </pre>
            on the corresponding action component, and the parameters specified above
            will be accessible in the <code class="methodname">parameters</code> argument:
            <pre class="screen">
                
    String actionParam1 = parameters.get("actionParam1");
    String actionParam2 = parameters.get("actionParam2");
                
            </pre>
        </p><p>
            Similarly, if in JSP we have an action submit tag:
        <pre class="screen">
            
&lt;ui:actionsubmit action="doMyAction2" value="An Action Link"&gt;
    &lt;ui:actionparam name="actionParam1" value="actionValue1"/&gt;
    &lt;ui:actionparam name="actionParam2" value="actionValue2"/&gt;
&lt;/ui:actionsubmit&gt;
            
        </pre>
        which displays a button, then when a user clicks on that button the action will
        be mapped to:
        <pre class="screen">
<code class="methodname">doMyAction2(Map parameters)</code>
        </pre>
        on the corresponding action component, and the parameters specified above
        will be accessible in the <code class="methodname">parameters</code> argument.
    </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ActionLinks"></a>Action Links</h3></div></div></div><p>
            Action components can map portlet strings to the action methods of other other
            components. This is achieved with the <code class="methodname">registerActionLink</code> method.
            This method is used to map an action received by one component to that of another. This
            is useful, in particular, with the <code class="methodname">ui:actionlink</code> tag and it is
            not necessary to handle the action in the active component.
        </p><p>
            Let's say you display a list of items in a table with an action component called
            <code class="classname">ListItemsComp</code> and when a user selects one of those items to view,
            you want to view the item with <code class="classname">ViewItemComp</code>. So, in the JSP for
            <code class="classname">ListItemsComp</code> you might have:
            <pre class="screen">
    
    &lt;% List itemList = ActionComponent.getPageAttribute(request, "itemList", new ArrayList());
       Iterator itemIter = itemList.iterator(); %&gt;
    &lt;ui:table&gt;
        &lt;ui:tr header="true"&gt;
            &lt;ui:td&gt;
                &lt;ui:text value="ID"/&gt;
            &lt;ui:td&gt;
            &lt;ui:td&gt;
                &lt;ui:text value="Attribute 1"/&gt;
            &lt;ui:td&gt;
            &lt;ui:td&gt;
                &lt;ui:text value="Attribute 2"/&gt;
            &lt;ui:td&gt;
        &lt;/ui:tr&gt;
        &lt;% while (itemIter.hasNext()) { %&gt;
               MyItem item = (MyItem)itemIter.next();
               String itemId = item.getId();
               String attribute1 = item.getAttribute1();
               String attribute2 = item.getAttribute2(); %&gt;
        &lt;ui:tr&gt;
            &lt;ui:td&gt;
                &lt;ui:actionlink action="doViewItem" value="&lt;%=itemId%&gt;"&gt;
                    &lt;ui:actionparam name="itemId" value="&lt;%=itemId%&gt;"/&gt;
                &lt;/ui:actionlink&gt;
            &lt;ui:td&gt;
            &lt;ui:td&gt;
                &lt;ui:text value="&lt;%=attribute1%&gt;"/&gt;
            &lt;ui:td&gt;
            &lt;ui:td&gt;
                &lt;ui:text value="&lt;%=attribute2%&gt;"/&gt;
            &lt;ui:td&gt;
        &lt;/ui:tr&gt;
        &lt;% } %&gt;
    &lt;/ui:table&gt;
    
            </pre>
        </p><p>
            In <code class="classname">ListItemsComp</code> you would setup an action link for the
            <code class="methodname">doViewItem</code> action like so:
            <pre class="screen">
                
public class ListItemsComp extends ActionComponent {

    // Other member variables...

    public ListItemsComp(ActionComponentFrame container, String compName)
            throws PortletException {
        // Call our super method...
        super(container, compName);

        // Register our action link. Forwards "doViewItem" method to ViewItemComp
        registerActionLink(getClass(), "doViewItem", ViewItemComp.class);

        // More code...
    }
                
            </pre>
        </p><p>
            Now, the parent frame to <code class="classname">ListItemsComp</code> will know to
            invoke the "doViewItem" method on <code class="classname">ViewItemComp</code> when
            <code class="classname">ListItemsComp</code> is the active component and it receives
            an action string with "doViewItem" as the value.
        </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ActionComponentFrame"></a>Action Component Frame</h3></div></div></div><p>
            As discussed earlier, action components can contain other action
            components within action component frames. An initial state for
            each child action component frame can be set in the constructor
            method or the <code class="methodname">onInit</code> method of each action
            component. In the <code class="classname">FileBrowserComp</code>, for example,
            we contain two instances of <code class="classname">FileListComp</code> like so:
            <pre class="screen">
                
public class FileBrowserComp extends FileComp {

    // Other member variables...

    // Frame for file "browser" 1
    protected ActionComponentFrame fileBrowser1Bean = null;
    // Frame for file "browser" 2
    protected ActionComponentFrame fileBrowser2Bean = null;

    // Other member variables...

    public FileBrowserComp(ActionComponentFrame container, String compName)
            throws PortletException {
        // Call our super method...
        super(container, compName);

        // File browser 1
        fileBrowser1Bean = createActionComponentFrame("fb1");
        fileBrowser1Bean.setNextState(FileListComp.class, DEFAULT_ACTION);

        // File browser 2
        fileBrowser2Bean = createActionComponentFrame("fb2");
        fileBrowser2Bean.setNextState(FileListComp.class, DEFAULT_ACTION);

        // More code...

        // Default jsp page
        setDefaultJspPage("/jsp/file/FileBrowserComp.jsp");
    }
                
            </pre>
        </p><p>
                 GridSphere provides an action component tag for displaying
                 action component frames in JSP. So, in order to display
                 file browser 1 for the code above, in the
                 JSP file <code class="filename">/jsp/file/FileBrowserComp.jsp</code> we use
                 the action component tag like so:
                 <pre class="screen">
                    
    &lt;ui:actioncomponent beanId="fb1"/&gt;
                    
                 </pre>
                </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ActionDialog"></a>Action Dialogs</h3></div></div></div><p>
            Action dialogs are modal components, components that assume control of the top level action
            component frame. They are created with the <code class="methodname">getActionDialog</code>
            method of <code class="classname">ActionComponent</code>. Once opened with
            <code class="methodname">showOkCancelDialog</code>, for example, they remain the active component
            in the top-level action component frame until either the <code class="methodname">doOk</code> method
            of the action dialog is called and it results in the <code class="methodname">closeDialog</code> being
            called, or the <code class="methodname">doCancel</code> is called. In both cases, the action component that
            creates the dialog must specify the next state to forward control to once the dialog
            closes. This is best illustrated with an example.
        </p><p>
            <code class="classname">FileListComp</code> will open a
            <code class="classname">FileMakeDirDialog</code> when its <code class="methodname">doMakeDir</code>
            action method like so:
            <pre class="screen">
                
    FileMakeDirDialog dialog
            = (FileMakeDirDialog)getActionDialog(FileMakeDirDialog.class);
    dialog.setFileHost(fileHostName);
    dialog.setFilePath(currentPathField.getValue());
    dialog.setMessageValue(getResourceString(MAKEDIR_MESSAGE_KEY));
    dialog.showOkCancelDialog(new ActionComponentState(getClass(), "doMakeDirApply"),
                              new ActionComponentState(getClass(), RENDER_ACTION));
                
            </pre>
            <code class="classname">FileListComp</code> specifies to invoke to its
            <code class="methodname">doMakeDir</code> method when the user clicks on "OK" on the
            the file make dir dialog and to invoke its render action when the user clicks
            cancel instead.
        </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ActionComponentTypes"></a>Action Component Types</h3></div></div></div><p>
            Action components are registed with <code class="filename">/WEB-INF/ActionComponentTypes.xml</code>
            inside each web application. This file contains multiple <code class="classname">action-component-type</code>
            entries which describe the action components contained in each web application.
            <pre class="screen">
        
        &lt;action-component-types&gt;

            &lt;action-component-type
                classname="YourActionComponentClass"
                default-action="TheFirstActionToPerform"
                render-action="AnActionToPerformInDoRender"
                default-jsp="TheDefeaultJspPageToDisplay"/&gt;

            &lt;!-- Specify as many action-component-type entries as you want --&gt;

        &lt;/action-component-types&gt;
        
            </pre>
        </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="DevelopingActionComponents"></a>Developing Action Component Portlets</h2></div></div></div><p>
        Developing an action component portlet amounts to extending <code class="classname">ActionComponentPortlet</code>
        and extending <code class="classname">ActionComponent</code> for each action component you wish
        to develop. Once the necessary classes have been implemented, then you specify your portlet
        entry in <code class="filename">/WEB-INF/portlet.xml</code> and your action components in
        <code class="filename">/WEB-INF/ActionComponentTypes.xml</code>. The required steps are
        summarized below:
    </p><div class="orderedlist"><ol type="1"><li><p>
                Create a Grid portlet project. Grid Portlets offers two ant targets for doing so:
                <div class="orderedlist"><ol type="a"><li><p>
                To create a new project from scratch, run <span><strong class="command">ant new-project</strong></span> and
                follow its instructions. This is similar to the new-project target in GridSphere.
                It will create a new portlet project in the <code class="filename">projects</code> directory
                of GridSphere that includes support for developing new action components.
                        </p></li><li><p>
                To modify an existing portlet project to support development of action components and
                job profiles, run <span><strong class="command">ant update-project</strong></span> and
                follow its instructions. This is similar to the update-project target in GridSphere.
                It will update an existing portlet project in the <code class="filename">projects</code> directory
                of GridSphere with the latest project files from GridSpehre and Grid Portlets.
                        </p></li></ol></div>
            </p></li><li><p>
                Implement your action components, extending from <code class="classname">ActionComponent</code>.
            </p></li><li><p>
                Specify the action component classes you developed in
                <code class="filename">/WEB-INF/ActionComponentTypes.xml</code>.
            </p></li><li><p>
                Extend <code class="classname">ActionComponentPortlet</code>. Inside the <code class="methodname">init</code>
                method of your portlet, set the default action components to display for each portlet mode
                your portlet supports:
                <pre class="screen">
            
public class MyComponentPortlet extends ActionComponentPortlet {

    public void init(PortletConfig config) throws PortletException {
        super.init(config);
        setViewModeComp(MyViewModeComp.class);
        setEditModeComp(MyEditModeComp.class);
        setHelpModeComp(MyHelpModeComp.class);
    }
}
            
                </pre>
            </p></li><li><p>
                Specify the portlet you developed in <code class="filename">/WEB-INF/portlet.xml</code>.
            </p></li></ol></div><p>
        Once you've completed your work, simply redeploy your web application and restart your webserver
        if necessary.
    </p></div></div></body></html>