<?xml version="1.0"?>

<!-- ================================================================= -->
<!-- C3PR build utilities                                              -->
<!-- ================================================================= -->
<project name="c3pr-2.0-utilities" default="instructions" basedir=".">

    <property environment="env" />

    <!-- ============================================================== -->
    <!-- cacore toolkit properties                                      -->
    <!-- ============================================================== -->
    <target name="checkcacoreToolkit" depends="setcacoreToolkit">
        <condition property="cacore.toolkit.not.found">
            <or>
                <not>
                    <isset property="ext.cacore.toolkit.home"/>
                 </not>
                    <equals arg1="${ext.cacore.toolkit.home}" arg2=""/>
            </or>
        </condition>
        <fail message="cacore toolkit home not set.
        Please set environment variable CACORE_TOOLKIT_HOME or property ext.cacore.toolkit.home"
                    if="cacore.toolkit.not.found"/>
        <echo message="cacore.toolkit: ${ext.cacore.toolkit.home}"/>
    </target>

    <target name="setcacoreToolkit" if="env.CACORE_TOOLKIT_HOME">
        <property name="ext.cacore.toolkit.home" value="${env.CACORE_TOOLKIT_HOME}"/>
    </target>


    <!-- ============================================================== -->
    <!-- Tomcat properties                                              -->
    <!-- ============================================================== -->
    <target name="checkTomcat" depends="setTomcat">
        <condition property="tomcat.not.found">
            <or>
                <not><isset property="ext.tomcat.dir"/></not>
                <equals arg1="${ext.tomcat.dir}" arg2=""/>
            </or>
        </condition>
        <fail message="Tomcat directory is not set in either CATALINA_HOME or ext.tomcat.dir" if="tomcat.not.found"/>
        <echo message="Tomcat: ${ext.tomcat.dir}"/>
    </target>
    <target name="setTomcat" if="env.CATALINA_HOME">
        <property name="ext.tomcat.dir" value="${env.CATALINA_HOME}"/>
    </target>


    <!-- ============================================================== -->
    <!-- Globus properties                                              -->
    <!-- ============================================================== -->
    <target name="checkGlobus" depends="setGlobus">
        <condition property="globus.not.found">
            <or>
                <not><isset property="ext.globus.dir"/></not>
                <equals arg1="${ext.globus.dir}" arg2=""/>
            </or>
        </condition>
        <fail message="Globus installation is not set in either GLOBUS_LOCATION or ext.globus.dir" if="globus.not.found"/>
        <echo message="Globus: ${ext.globus.dir}"/>
    </target>

    <target name="setGlobus" if="env.GLOBUS_LOCATION">
        <property name="ext.globus.dir" value="${env.GLOBUS_LOCATION}"/>
        <property name="build.stubs" location="${ext.globus.dir}/share/globus_wsrf_tools/build-stubs.xml" />
        <property name="schema.src" location="${ext.globus.dir}/share/schema" />
    </target>


    <!-- ============================================================== -->
    <!-- Maven properties                                              -->
    <!-- ============================================================== -->

    <target name="checkMaven" depends="setMaven">
          <condition property="maven.not.found">
              <or>
                  <not><isset property="ext.maven.dir"/></not>
                  <equals arg1="${ext.maven.dir}" arg2=""/>
              </or>
          </condition>
          <fail message="Maven directory is not set in either MAVEN_HOME or ext.maven.dir" if="maven.not.found"/>
          <echo message="Maven: ${ext.maven.dir}"/>
      </target>
      <target name="setMaven" if="env.MAVEN_HOME">
          <property name="ext.maven.dir" value="${env.MAVEN_HOME}"/>
      </target>

      <!-- ============================================================== -->


    <target name="instructions" description="Default Target">
        <echo message="============= Don't execute directly ============"/>
    </target>

</project>