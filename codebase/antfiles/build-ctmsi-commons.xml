
<project xmlns:artifact="urn:maven-artifact-ant">
    <!--Get ctmsi commons project artifacts-->

    <!--default value will be overriden by build.properties-->
    <property file="${antfiles.dir}/build.properties"/>
    <property name="ctmsi.commons.version" value="0.2"/>

    <property name="antfiles.lib.dir" value="${antfiles.dir}/lib"/>
    <property name="ctms.commons.dir" value="${share.dir}/ctms-commons"/>

    <path id="maven-ant-tasks.classpath" path="${antfiles.lib.dir}/maven-ant-tasks-2.0.7.jar" />

    <typedef resource="org/apache/maven/artifact/ant/antlib.xml" uri="urn:maven-artifact-ant"
             classpathref="maven-ant-tasks.classpath" />

    <artifact:remoteRepository id="ctmsi.repository" url="http://download.bioinformatics.northwestern.edu/maven2" />


    <target name="resolve-ctms-dependencies"
            description="Get CTMSI commons dependencies">
        <!--clean out previous artifacts-->
        <delete dir="${ctms.commons.dir}" failonerror="true"/>
        <mkdir dir="${ctms.commons.dir}"/>

        <artifact:dependencies filesetId="dependency.fileset" useScope="runtime">
            <remoteRepository refid="ctmsi.repository" />
            <dependency groupId="gov.nih.nci.cabig.ctms" artifactId="ctms-commons-core"
                        version="${ctmsi.commons.version}"/>
            <dependency groupId="gov.nih.nci.cabig.ctms" artifactId="ctms-commons-lang"
                        version="${ctmsi.commons.version}"/>
            <dependency groupId="gov.nih.nci.cabig.ctms" artifactId="ctms-commons-base"
                        version="${ctmsi.commons.version}"/>
            <dependency groupId="gov.nih.nci.cabig.ctms" artifactId="ctms-commons-web"
                        version="${ctmsi.commons.version}"/>
        </artifact:dependencies>

        <copy todir="${ctms.commons.dir}">
            <fileset refid="dependency.fileset"/>
            <mapper type="flatten" />
        </copy>

    </target>

</project>